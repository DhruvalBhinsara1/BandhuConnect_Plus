BandhuConnect+ Backend Guidelines: Hackathon MVP (Descriptive)This guideline provides a focused and detailed approach to building the backend for yourBandhuConnect+ MVP within a hackathon timeframe. It prioritizes core functionality, rapiddevelopment, and essential security, explicitly leveraging your chosen Supabase stack. Thisdocumentation is structured to be clear and actionable, even for an AI app builder, explainingthe why and how behind each recommendation.1. Architectural Principles (MVP Focus)For the hackathon, we'll adhere to these core principles. The goal isn't a hyper-optimizedproduction system, but a demonstrably functional prototype that showcases the main features.We'll rely heavily on Supabase's managed nature to abstract away complex infrastructureconcerns.• Functionality: The primary objective is to ensure that the core user journeys (e.g.,volunteer sign-up, task display, basic chat, pilgrim requesting help, admin viewingrequests) are operational and can be demonstrated. This means prioritizing workingfeatures over intricate edge-case handling.• Rapid Development: We will choose the quickest and most direct path toimplementation. This often means leveraging Supabase's client-side SDKs and pre-builtfeatures extensively, minimizing custom server-side code unless absolutely necessary fora core demo.• Basic Scalability & Reliability: By using Supabase's built-in scaling and uptime, weautomatically gain a level of system resilience suitable for an MVP. We won't need toimplement custom load balancing or failover strategies during the hackathon. Supabasehandles the underlying PostgreSQL database and authentication services in a robust,managed way.• Essential Security: Our focus will be on implementing authentication (knowing who theuser is) and basic data access control (ensuring users can only interact with data they'resupposed to). This mainly involves configuring Supabase's Row Level Security (RLS) andauthentication features.2. Tech Stack & Services (Leveraging Supabase for MVP)Supabase offers many features out-of-the-box that are perfect for rapid hackathondevelopment, significantly reducing the need to write custom backend code.2.1. Database (PostgreSQL via Supabase)Supabase provides a powerful PostgreSQL database. We'll define its structure and access rules.• Schema Design: This is the blueprint for our data. We will set up the following tables:o users: Stores information for all participants (volunteers, admins, pilgrims).o requests: Holds all incoming help requests from pilgrims/attendees.o volunteer\_tasks: Links specific requests to assigned volunteers and tracks taskstatus.o messages: Stores chat messages for the general chatroom.o Focus: It's crucial to define Primary Keys (PKs) (unique identifiers for eachrecord, typically uuid type) and Foreign Keys (FKs) (links between tables, likeuser\_id in requests linking to users.id) correctly. This ensures data integrity andallows efficient querying.o Data Types: Use appropriate PostgreSQL data types. For example, uuid for IDs,text for names, emails, descriptions, enum for predefined statuses (like 'pending','assigned'), float8 for latitude/longitude, or the more precise geography(point)type for spatial data, which is ideal for location tracking.• Basic Indexing: For efficient data retrieval, we need indexes.o Purpose: Indexes are like an alphabetical list for a book; they speed up searches.We'll ensure indexes are applied to all Foreign Key (FK) columns (as these arefrequently used for joining tables) and any columns used in common WHEREclauses (e.g., created\_at for ordering, status for filtering). Supabase often createssome essential indexes automatically.• Row Level Security (RLS): This is an absolutely critical security layer for Supabase, evenfor an MVP.o Purpose: RLS allows us to define fine-grained access policies directly at thedatabase level. This means a user's database query will only return rows they areauthorized to see, regardless of what the application code requests.o Implementation: We will implement basic RLS policies to demonstrate that:▪ User Profiles: Users can only see/edit their own user profile data.▪ Pilgrim Requests: Pilgrims can only see the requests they have submitted.▪ Volunteer Tasks: Volunteers can only see tasks that have been explicitlyassigned to them.▪ Admin Access: Administrators, identified by their role, can see andmodify all relevant data across users, requests, and volunteer\_taskstables.• Transactions: While full transactional integrity (ACID properties) might be a posthackathon feature, for critical operations like assigning a task that involves updating arequest's status and creating a volunteer\_task entry, an AI builder should be aware thatthese operations ideally require atomic execution. For the hackathon, a simplesequential update might suffice, but acknowledge that a transaction is the correctapproach.2.2. Authentication (Supabase Auth)Supabase Auth provides a managed authentication service, simplifying user management.• User Registration & Login: We will implement user sign-up and login functionality for allthree user roles (volunteer, admin, pilgrim).o Methods: Leverage Supabase Auth's capabilities for Phone OTP (One-TimePassword) or Email/Password-based authentication. This makes it easy to addnew users.• Role-Based Access Control (RBAC): Users will have an assigned role.o Implementation: Use a role column (e.g., an enum type: 'volunteer', 'admin','pilgrim') in your users table. This role can then be used in your RLS policies andfor simple client-side UI rendering logic to differentiate permissions (e.g., anadmin sees different dashboard components than a volunteer).• Secure Token Handling: Supabase Auth handles JSON Web Tokens (JWTs) automatically.o Purpose: JWTs are secure tokens that verify a user's identity and permissions.Supabase manages their creation, refreshing, and secure storage on the clientside (e.g., in localStorage or secure storage in React Native), abstracting awaycomplex token management for the developer.2.3. Real-time (Supabase Realtime)Supabase Realtime enables instant updates across connected clients.• Core Real-time Flows: This is crucial for the dynamic nature of BandhuConnect+. We willimplement Realtime for the most impactful user experiences:o Request Flow: As soon as a pilgrim creates a new request, administrators (andpotentially nearby available volunteers, though that's a stretch) will see this newrequest appear on their dashboard immediately without manual refreshing.o Assignment Flow: When an admin assigns a task to a volunteer, the volunteer'smobile app dashboard will instantly update to display their newly assigned task.o Chat Flow: Messages sent in the general chatroom will appear for all participantsin that channel in real-time.• Channel Design: For the MVP, we'll start with simple real-time channels.o Examples: One general chat channel (chat\_general), and a channel for adminrequest updates (admin\_requests) could be sufficient. As the app grows, moregranular channels (e.g., chat\_skill\_med) would be added.2.4. File Storage (Supabase Storage)Supabase Storage provides a robust solution for managing user-uploaded files.• Photo Uploads: We will implement the functionality for pilgrims to upload photos fortwo critical features:o "Lost Person" reports (e.g., a photo of the missing person).o "Sanitation Issues" reports (e.g., a photo of the unsanitary area as proof).• Storage Buckets & Policies:o Buckets: Create at least one dedicated storage bucket (e.g., user-uploads) withinSupabase. For production, more granular buckets like lost-person-photos andsanitation-proofs would be better.o Policies: Set up basic storage policies to ensure:▪ Authenticated users can upload files to the designated bucket(s).▪ Viewing policies ensure that only relevant users (e.g., admins, assignedvolunteers for a task) can access specific sensitive files (like lost personphotos).2.5. Backend Logic (Supabase Edge Functions / Basic Server Logic)For operations requiring server-side logic beyond direct database access, we'll use SupabaseEdge Functions (serverless functions).• Task Assignment (Simplified): The "algorithm" for assigning tasks will be very basic forthe MVP.o Implementation: This could initially be implemented with a simple function(either directly in your React Native client for the hackathon, or as a very basicSupabase Edge Function if time permits) that performs a direct assignment. Forexample, it could assign a hardcoded task to the first available volunteer that hasa 'general' skill, or is within a simulated proximity.o Focus: The goal here is to demonstrate a task being assigned and reflected onthe volunteer's dashboard, not to build a sophisticated optimization engine.• Notifications (Basic Triggers): Set up simple server-side logic (e.g., within an EdgeFunction or a database trigger if Supabase supports it for this use case) that sends abasic notification.o Example: When a volunteer\_tasks record is inserted (meaning a task is assigned),a notification can be sent to the relevant volunteer's device.• Data Validation: Implement basic server-side validation for critical fields (e.g., ensuringrequired fields are present, basic type checks) within your Edge Functions or databaseCHECK constraints. For less critical user input, rely on client-side validation to savedevelopment time during the hackathon.3. API Design (MVP Focus)For the hackathon, our API interaction will be direct and simplified.• Direct Supabase Client: You will primarily interact with Supabase directly from yourReact Native app. The Supabase client libraries (e.g., @supabase/supabase-js) abstractaway the raw HTTP API calls, making it very efficient for CRUD (Create, Read, Update,Delete) operations.• Resource Interaction: Focus on using the Supabase client to perform standard databaseoperations against your users, requests, volunteer\_tasks, and messages tables.• Error Handling: Leverage the error handling provided by the Supabase client. For the UI,for presentation purposes, show a simple alert or a message on the screen for any APIerrors encountered. Full-fledged global error handling and detailed user-friendly errormessages can be refined post-hackathon.4. Security Considerations (MVP Essentials)Even for an MVP, core security is non-negotiable.• RLS (Crucial): As emphasized, correctly configuring Row Level Security policies inPostgreSQL via the Supabase UI is the most important security measure to preventunauthorized data access.• Environment Variables: Never hardcode sensitive information like your Supabase URLor anon key directly into your codebase. Store them securely using React Native'senvironment variable capabilities (e.g., .env files and tools like react-native-dotenv orexpo-constants).• HTTPS: Supabase automatically handles HTTPS for all API communication. This encryptsdata in transit, protecting it from eavesdropping.• Auth Flow: Ensure that your chosen authentication flow (Phone OTP or Email/Password)is correctly implemented and effectively secures user sessions, allowing onlyauthenticated and authorized users to interact with the app's features.5. Deployment & Operations (Hackathon Level)These steps focus on getting your backend running and debuggable for the hackathon.• Supabase Project Setup: The first step is to set up your Supabase project online. Thisinvolves defining your database tables (users, requests, etc.) and configuring your RLSpolicies within the Supabase dashboard.• Frontend Deployment: Your React Native app will be deployed through Expo EAS Build(for a production-like build) or by running it locally during development.• Basic Testing: Conduct thorough manual testing of the core user flows for each role:o Volunteer: Sign-up, view assigned task, check-in/out, send a chat message.o Pilgrim: Sign-up, create a request (e.g., lost child with photo), view assignedvolunteer on map.o Admin: View dashboard counts, view new requests, manually assign a task, viewvolunteer status.• Debugging: Utilize Supabase logs (available in the Supabase dashboard) to inspectserver-side errors or function execution. For client-side issues, use your React Nativeapp's development server logs and browser console (if web debugging).By following this descriptive, MVP-focused guideline, you'll be able to build a functional andimpressive prototype of BandhuConnect+ within your 3-day hackathon, clearly showcasing itscore value proposition. Good luck!